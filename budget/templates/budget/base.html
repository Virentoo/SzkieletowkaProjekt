{% extends "budget/base_recent.html" %}

{% block head %}

{% endblock head %}

{% block upper %}

{% endblock %}

{% block content %}
    {% if category_list %}
        <ul>
            {% for category in category_list %}
                <div class="card">
                    <div class="card-header">
                        <a class="card-link" data-toggle="collapse"
                           href="#collapse{{ forloop.counter }}">{{ category.name }}
                            ({{ category.user.login }})
                            {% if category.monthly %} | Monthly {% endif %}</a>
                        <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse show">
                            {% load base_extra %}
                            {% with item_list|get:category as cat_items %}
                                <div class="panel-body">
                                    {% for item in cat_items %}
                                        {% if item.type == "expense" %}
                                            - Wydatek: {{ item.name }}, Koszt: {{ item.amount }} <br>
                                        {% elif item.type == "income" %}
                                            - Wp≈Çyw: {{ item.name }}, Kwota: {{ item.amount }} <br>
                                        {% endif %}
                                        </div>
                                    {% endfor %}
                            {% endwith %}
                        </div>
                    </div>
                </div>
                <br>
            {% endfor %}
        </ul>
    {% else %}
        <p>No categories are available.</p>
    {% endif %}
{% endblock content %}

{% block short_details %}
    <form action="{% url 'base/recent' %}" method="post">
        {% csrf_token %}
        <button class="btn btn-info" name="expense_button" id="expense_button" value="expense" type="submit">
            Show recent
        </button>
    </form>
{% endblock %}