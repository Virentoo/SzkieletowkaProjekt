{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>base</title>
    <link rel="stylesheet" href="{% static '/budget/base_styles.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    {% block head %}
    {% endblock head %}
</head>
<body>

<div id="container">
    <div id="upper">
        <table style="width: 100%">
            <tr>
                <th style="width: 50px">
                    {% block upper %}
                        <form action="{% url 'base' %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-default">
                                <img src="{% static '/budget/back-icon.png' %}" alt="" style="width: 40px"/>
                            </button>
                        </form>
                    {% endblock %}
                </th>
                <th><h1 style="text-align: left">Witaj {{ user.username }}</h1></th>
                <th><p style="text-align: right">{{ date }}</p></th>
            </tr>
        </table>
    </div>
    <div id="content">

        {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}">
                {{ message }}
              </div>
            {% endfor %}
        {% endif %}

        {% block content %}

            <form action="{% url 'base/recent' %}" method="post">
                {% csrf_token %}
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Show recent
                        <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li>
                            <button {% if selected_panel == 'Income' %} disabled {% endif %} class="dropdown-item"
                                                                        name="dropdown_panel" value=1 type="submit">
                                Income
                            </button>
                        </li>
                        <li>
                            <button {% if selected_panel == 'Expense' %} disabled {% endif %} class="dropdown-item"
                                                                         name="dropdown_panel" value=2 type="submit">
                                Expense
                            </button>
                        </li>
                    </ul>
                </div>
            </form>
            <br>
            {% if transaction_list %}
                <ul>
                    {% for transaction in transaction_list %}
                        <li>Expense: {{ transaction.name }} </li>
                        Desc: {{ transaction.desc }} <br>
                        Price: {{ transaction.amount }} <br>
                        Date: {{ transaction.date }} <br>
                        <br>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No transactions are available.</p>
            {% endif %}
        {% endblock content %}
    </div>
    {% block right %}
        <div id="short_details">
            <form action="{% url 'base/new' %}" method="post">
                {% csrf_token %}
                <button class="btn btn-info" id="income_button" value="income" type="submit">Dodaj nowy
                    Income
                </button>
                <button class="btn btn-info" id="expense_button" value="expense" type="submit">Dodaj
                    nowy Expense
                </button>
            </form>
            <hr>
            {% block short_details %}
            {% endblock %}
        </div>
    {% endblock right %}
    <div id="footer">
        <h1>Footer!!!</h1>
    </div>
</div>
</body>
</html>
