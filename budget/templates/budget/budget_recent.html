{% extends "budget/base.html" %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}
<body>
{% block upper_icon %}
    <th style="width: 50px">
        <form action="{% url 'budget' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-default">
                <img src="{% static '/budget/back-icon.png' %}" alt="" style="width: 40px"/>
            </button>
        </form>
    </th>
{% endblock %}

{% block content_middle %}
    <form action="{% url 'budget/recent' %}" method="post">
        {% csrf_token %}
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Show recent
                <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li>
                    <button {% if selected_panel == 'Income' %} disabled {% endif %} class="dropdown-item"
                                                                name="dropdown_panel" value=1 type="submit">
                        Income
                    </button>
                </li>
                <li>
                    <button {% if selected_panel == 'Expense' %} disabled {% endif %} class="dropdown-item"
                                                                 name="dropdown_panel" value=2 type="submit">
                        Expense
                    </button>
                </li>
            </ul>
        </div>
    </form>
    <br>
    {% if transaction_list %}
        <ul>
            {% for transaction in transaction_list %}
                <li>Expense: {{ transaction.name }} </li>
                Desc: {{ transaction.desc }} <br>
                Price: {{ transaction.amount }} <br>
                Date: {{ transaction.date }} <br>
                <br>
            {% endfor %}
        </ul>
    {% else %}
        <p>No transactions are available.</p>
    {% endif %}
{% endblock %}

{% block right %}
    <div id="short_details">
        <form action="{% url 'budget/new' %}" method="post">
            {% csrf_token %}
            <button class="btn btn-info" id="income_button" value="income" type="submit">Dodaj nowy
                Income
            </button>
            <button class="btn btn-info" id="expense_button" value="expense" type="submit">Dodaj
                nowy Expense
            </button>
        </form>
        <hr>
        {% block short_details %}
            <form action="{% url 'budget/recent' %}" method="post">
                {% csrf_token %}
                <div id="filer-form-price" class="form-inline">
                    <label for="priceInFrom" class="mr-sm-2">Price:</label>
                    <input name="priceFrom" type="number" class="col-0 form-control form-control-sm" id="priceInFrom"
                           placeholder="from" value={{ form.priceFrom.value }}>
                    <label for="priceInTo" style="width: 20px"> - </label>
                    <input name="priceTo" type="number" class="form-control form-control-sm" id="priceInTo"
                           placeholder="to" value={{ form.priceTo.value }}/>
                </div>
                <div id="filter-form-date" class="form-inline" style="padding-top: 10px">
                    <label for="dateInFrom" class="mr-sm-2">Date:</label>
                    <input name="dateFrom" type="date" id="dateInFrom" placeholder="dd/mm/yyyy"
                           data-date-format="dd/mm/yyyy"
                           class="col-0 form-control form-control-sm"
                           data-provide="datepicker-inline"
                           value={{ form.dateFrom.value }}>
                    <label for="dateInTo" style="width: 20px"> - </label>
                    <input name="dateTo" type="date" id="dateInTo" placeholder="dd/mm/yyyy"
                           data-date-format="dd/mm/yyyy"
                           class="col-0 form-control form-control-sm"
                           data-provide="datepicker-inline"
                           value={{ form.dateTo.value }}>
                </div>
                <div id="filter-form-time" class="form-inline" style="padding-top: 10px">
                    <label for="timeInFrom" class="mr-sm-2">Time:</label>
                    <input name="timeFrom" type="time" id="timeInFrom" placeholder="hh:mm"
                           class="col-0 form-control form-control-sm"
                           value={{ form.timeFrom.value }}>
                    <label for="timeInTo" style="width: 20px"> - </label>
                    <input name="timeTo" type="time" id="timeInTo" placeholder="hh:mm"
                           class="col-0 form-control form-control-sm"
                           value={{ form.timeTo.value }}>
                </div>
                <div id="filter-form-category" class="form-inline">
                    <label for="categoryInForm" class="mr-sm-2">Category:</label>
                    {% for category in categories %}
                        {% if not selected_categories or category not in selected_categories %}
                            <button name="recCategory" value={{ category.id }} type="submit" class="btn btn-secondary"
                                    style="margin-right: 5px; margin-top: 10px">{{ category.name }}
                                <i class="fa fa-plus"></i></button>
                        {% else %}
                        {% endif %}
                    {% endfor %}
                </div>
                <div id="filter-form-selected_category" class="form-inline" style="padding-top: 10px">
                    {% if selected_categories %}
                        <label for="categoryInForm" class="mr-sm-2">Selected categories:</label>
                        {% for categorie in selected_categories %}
                            <button name="remCategory" value={{ categorie.id }} type="submit" class="btn btn-secondary"
                                    style="margin-right: 5px; margin-top: 10px">{{ categorie.name }}
                                <i class="fa fa-minus"></i>
                            </button>
                        {% endfor %}
                    {% endif %}
                </div>
                <div id="filter-form-monthly" class="form-inline" style="padding-top: 10px">
                    {% if not in_monthly %}
                        <button name="monthly" value=True type="submit" class="btn btn-secondary"
                                style="margin-right: 5px; margin-top: 10px">Monthly
                            <i class="fa fa-minus-square-o"></i>
                        </button>
                    {% elif in_monthly == "True" %}
                        <button name="monthly" value=False type="submit" class="btn btn-secondary"
                                style="margin-right: 5px; margin-top: 10px">Monthly
                            <i class="fa fa-square"></i>
                        </button>
                    {% else %}
                        <button name="monthly" type="submit" class="btn btn-secondary"
                                style="margin-right: 5px; margin-top: 10px">Monthly
                            <i class="fa fa-square-o"></i>
                        </button>
                    {% endif %}
                </div>
                <input class="btn btn-info" type="submit" value="Filer" style="margin-top: 10px; width: 70px">
            </form>
            <div id="filter-form-buttons" style="margin-top: 10px">
                <form action="{% url 'budget/recent' %}" method="get">
                    <input class="btn btn-warning" type="submit" value="Clear" style="width: 70px">
                </form>
            </div>
        {% endblock %}
    </div>
{% endblock %}
